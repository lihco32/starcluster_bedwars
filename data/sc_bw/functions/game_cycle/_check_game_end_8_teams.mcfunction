# init variables
# amount of players alive from each team
scoreboard players set #RED_ALIVE sc_bw 0
scoreboard players set #BLUE_ALIVE sc_bw 0
scoreboard players set #GREEN_ALIVE sc_bw 0
scoreboard players set #YELLOW_ALIVE sc_bw 0
scoreboard players set #PURPLE_ALIVE sc_bw 0
scoreboard players set #PINK_ALIVE sc_bw 0
scoreboard players set #BLACK_ALIVE sc_bw 0
scoreboard players set #WHITE_ALIVE sc_bw 0

#count players
execute as @a[tag=sc_bw_red, tag=!sc_bw_dead] run scoreboard players add #RED_ALIVE sc_bw 1
execute as @a[tag=sc_bw_blue, tag=!sc_bw_dead] run scoreboard players add #BLUE_ALIVE sc_bw 1
execute as @a[tag=sc_bw_green, tag=!sc_bw_dead] run scoreboard players add #GREEN_ALIVE sc_bw 1
execute as @a[tag=sc_bw_yellow, tag=!sc_bw_dead] run scoreboard players add #YELLOW_ALIVE sc_bw 1
execute as @a[tag=sc_bw_purple, tag=!sc_bw_dead] run scoreboard players add #PURPLE_ALIVE sc_bw 1
execute as @a[tag=sc_bw_pink, tag=!sc_bw_dead] run scoreboard players add #PINK_ALIVE sc_bw 1
execute as @a[tag=sc_bw_black, tag=!sc_bw_dead] run scoreboard players add #BLACK_ALIVE sc_bw 1
execute as @a[tag=sc_bw_white, tag=!sc_bw_dead] run scoreboard players add #WHITE_ALIVE sc_bw 1

#determine whether the game should end
execute if score #RED_ALIVE sc_bw matches 1.. if score #BLUE_ALIVE sc_bw matches 0 if score #GREEN_ALIVE sc_bw matches 0 if score #YELLOW_ALIVE sc_bw matches 0 if score #PURPLE_ALIVE sc_bw matches 0 if score #PINK_ALIVE sc_bw matches 0 if score #BLACK_ALIVE sc_bw matches 0 if score #WHITE_ALIVE sc_bw matches 0 if score #BLUE sc_bw_bed_present matches 0 if score #GREEN sc_bw_bed_present matches 0 if score #YELLOW sc_bw_bed_present matches 0 if score #PURPLE sc_bw_bed_present matches 0 if score #PINK sc_bw_bed_present matches 0 if score #BLACK sc_bw_bed_present matches 0 if score #WHITE sc_bw_bed_present matches 0 run function sc_bw:victory/red
execute if score #BLUE_ALIVE sc_bw matches 1.. if score #RED_ALIVE sc_bw matches 0 if score #GREEN_ALIVE sc_bw matches 0 if score #YELLOW_ALIVE sc_bw matches 0 if score #PURPLE_ALIVE sc_bw matches 0 if score #PINK_ALIVE sc_bw matches 0 if score #BLACK_ALIVE sc_bw matches 0 if score #WHITE_ALIVE sc_bw matches 0 if score #RED sc_bw_bed_present matches 0 if score #GREEN sc_bw_bed_present matches 0 if score #YELLOW sc_bw_bed_present matches 0 if score #PURPLE sc_bw_bed_present matches 0 if score #PINK sc_bw_bed_present matches 0 if score #BLACK sc_bw_bed_present matches 0 if score #WHITE sc_bw_bed_present matches 0 run function sc_bw:victory/blue
execute if score #GREEN_ALIVE sc_bw matches 1.. if score #BLUE_ALIVE sc_bw matches 0 if score #RED_ALIVE sc_bw matches 0 if score #YELLOW_ALIVE sc_bw matches 0 if score #PURPLE_ALIVE sc_bw matches 0 if score #PINK_ALIVE sc_bw matches 0 if score #BLACK_ALIVE sc_bw matches 0 if score #WHITE_ALIVE sc_bw matches 0 if score #BLUE sc_bw_bed_present matches 0 if score #RED sc_bw_bed_present matches 0 if score #YELLOW sc_bw_bed_present matches 0 if score #PURPLE sc_bw_bed_present matches 0 if score #PINK sc_bw_bed_present matches 0 if score #BLACK sc_bw_bed_present matches 0 if score #WHITE sc_bw_bed_present matches 0 run function sc_bw:victory/green
execute if score #YELLOW_ALIVE sc_bw matches 1.. if score #BLUE_ALIVE sc_bw matches 0 if score #GREEN_ALIVE sc_bw matches 0 if score #RED_ALIVE sc_bw matches 0 if score #PURPLE_ALIVE sc_bw matches 0 if score #PINK_ALIVE sc_bw matches 0 if score #BLACK_ALIVE sc_bw matches 0 if score #WHITE_ALIVE sc_bw matches 0 if score #BLUE sc_bw_bed_present matches 0 if score #GREEN sc_bw_bed_present matches 0 if score #RED sc_bw_bed_present matches 0 if score #PURPLE sc_bw_bed_present matches 0 if score #PINK sc_bw_bed_present matches 0 if score #BLACK sc_bw_bed_present matches 0 if score #WHITE sc_bw_bed_present matches 0 run function sc_bw:victory/yellow
execute if score #PURPLE_ALIVE sc_bw matches 1.. if score #BLUE_ALIVE sc_bw matches 0 if score #GREEN_ALIVE sc_bw matches 0 if score #YELLOW_ALIVE sc_bw matches 0 if score #RED_ALIVE sc_bw matches 0 if score #PINK_ALIVE sc_bw matches 0 if score #BLACK_ALIVE sc_bw matches 0 if score #WHITE_ALIVE sc_bw matches 0 if score #BLUE sc_bw_bed_present matches 0 if score #GREEN sc_bw_bed_present matches 0 if score #YELLOW sc_bw_bed_present matches 0 if score #RED sc_bw_bed_present matches 0 if score #PINK sc_bw_bed_present matches 0 if score #BLACK sc_bw_bed_present matches 0 if score #WHITE sc_bw_bed_present matches 0 run function sc_bw:victory/purple
execute if score #PINK_ALIVE sc_bw matches 1.. if score #BLUE_ALIVE sc_bw matches 0 if score #GREEN_ALIVE sc_bw matches 0 if score #YELLOW_ALIVE sc_bw matches 0 if score #PURPLE_ALIVE sc_bw matches 0 if score #RED_ALIVE sc_bw matches 0 if score #BLACK_ALIVE sc_bw matches 0 if score #WHITE_ALIVE sc_bw matches 0 if score #BLUE sc_bw_bed_present matches 0 if score #GREEN sc_bw_bed_present matches 0 if score #YELLOW sc_bw_bed_present matches 0 if score #PURPLE sc_bw_bed_present matches 0 if score #RED sc_bw_bed_present matches 0 if score #BLACK sc_bw_bed_present matches 0 if score #WHITE sc_bw_bed_present matches 0 run function sc_bw:victory/pink
execute if score #BLACK_ALIVE sc_bw matches 1.. if score #BLUE_ALIVE sc_bw matches 0 if score #GREEN_ALIVE sc_bw matches 0 if score #YELLOW_ALIVE sc_bw matches 0 if score #PURPLE_ALIVE sc_bw matches 0 if score #PINK_ALIVE sc_bw matches 0 if score #RED_ALIVE sc_bw matches 0 if score #WHITE_ALIVE sc_bw matches 0 if score #BLUE sc_bw_bed_present matches 0 if score #GREEN sc_bw_bed_present matches 0 if score #YELLOW sc_bw_bed_present matches 0 if score #PURPLE sc_bw_bed_present matches 0 if score #PINK sc_bw_bed_present matches 0 if score #RED sc_bw_bed_present matches 0 if score #WHITE sc_bw_bed_present matches 0 run function sc_bw:victory/black
execute if score #WHITE_ALIVE sc_bw matches 1.. if score #BLUE_ALIVE sc_bw matches 0 if score #GREEN_ALIVE sc_bw matches 0 if score #YELLOW_ALIVE sc_bw matches 0 if score #PURPLE_ALIVE sc_bw matches 0 if score #PINK_ALIVE sc_bw matches 0 if score #BLACK_ALIVE sc_bw matches 0 if score #RED_ALIVE sc_bw matches 0 if score #BLUE sc_bw_bed_present matches 0 if score #GREEN sc_bw_bed_present matches 0 if score #YELLOW sc_bw_bed_present matches 0 if score #PURPLE sc_bw_bed_present matches 0 if score #PINK sc_bw_bed_present matches 0 if score #BLACK sc_bw_bed_present matches 0 if score #RED sc_bw_bed_present matches 0 run function sc_bw:victory/white

# recursion
execute if score #IS_GAME_RUNNING sc_bw matches 1 run schedule function sc_bw:game_cycle/_check_game_end_8_teams 3s